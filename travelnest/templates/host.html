{% extends 'base.html' %}
{% load static %}

{% block content %}
<style>
  /* Custom CSS for Host Dashboard Page */
  ul {
  padding: 0;
  margin: 0;
  list-style: none;
}

.list {
  background-color: #ecf0f1;
  border: 1px solid #dfe6e9;
  border-radius: 5px;
  padding: 10px;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
}

/* Style for status label */
.status-label {
  font-weight: bold;
  color: #3498db;
}

/* Apply different background colors based on status */
li[data-status="approved"] {
  background-color: #2ecc71;
  color: #fff;
}

li[data-status="pending"] {
  background-color: #f39c12;
  color: #fff;
}

li[data-status="unapproved"] {
  background-color: #e74c3c;
  color: #fff;
}
/* Main Content Area */
.main-content {
  margin-top: 20px;
}

/* Welcome Message */
.welcome-message {
  color: #3498db;
}

/* Add Homestay Heading */
.add-homestay-heading {
  margin-top: 20px;
  color: #2ecc71;
}

/* Sidebar Styles */
.sidebar {
  background-color: #ecf0f1;
  padding: 15px;
  border-radius: 5px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.sidebar h3 {
  color: #3498db;
}

/* Sidebar List Styles */
.sidebar ul {
  list-style-type: none;
  padding: 0;
}

.sidebar li {
  margin-bottom: 10px;
}

/* Sidebar Link Styles */
.sidebar a {
  text-decoration: none;
  color: #2c3e50;
}

.sidebar a:hover {
  color: #3498db;
}

</style>
  <div class="container main-content">
    <div class="row">
      <!-- Main Content Area -->
      <div class="col-md-9">
        <h2>Welcome, {{ user.username }}!</h2>
        <h3>Your Homestays</h3>

        <!-- Filter dropdown with automatic form submission -->
        <form method="get" action="{% url 'host_dashboard' %}" id="filterForm">
          <label for="status">Filter by Status:</label>
          <select name="status" id="status" onchange="document.getElementById('filterForm').submit()">
            <option value="approved" {% if status == 'approved' %}selected{% endif %}>Approved</option>
            <option value="pending" {% if status == 'pending' %}selected{% endif %}>Pending</option>
            <option value="unapproved" {% if status == 'unapproved' %}selected{% endif %}>Unapproved</option>
          </select>
          <!-- Use a button to submit the form, you can style it as needed -->
          <button type="submit" style="display: none;"></button>
        </form>

        <!-- Display homestays -->
        {% if homestays %}
          <ul>
            {% for homestay in homestays %}
              <li class="list">{{ homestay.name }} - {{ homestay.location }} - {{ homestay.status }}</li>
              <!-- Add other details you want to display -->
            {% endfor %}
          </ul>
        {% else %}
          <p>No homestays found.</p>
        {% endif %}
      </div>

      <!-- Sidebar -->
      <div class="col-md-3">
        <!-- Your existing sidebar content -->
        <div class="sidebar">
          <h3>Host Dashboard</h3>
          <ul class="nav flex-column">
            <li class="nav-item">
              <a class="nav-link" href="{% url 'add' %}">Add</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'host_dashboard' %}">Homestays</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'bookings' %}">Bookings</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>

  <script>
    // JavaScript to submit the form when dropdown value changes
    document.getElementById('status').addEventListener('change', function() {
      document.getElementById('filterForm').submit();
    });
  </script>

{% endblock %}
