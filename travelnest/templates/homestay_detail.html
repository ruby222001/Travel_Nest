{% extends 'base.html' %}
{% load static %}
{% block content %}
<link href="{% static 'responsive.css' %}" rel="stylesheet" />
  <div class="container">
    <h2>{{ homestay.name }}</h2>
    <p>Location: {{ homestay.location }}</p>
    <p>Number of Guests: {{ homestay.num_guests }}</p>
    <div class="map-container" data-latitude="{{ homestay.latitude }}" data-longitude="{{ homestay.longitude }}" style="height: 300px;"></div>
  </div>
  <div> <a href="{% url 'add_homestay' %}">Add</a></div>
  <script>
    function initializeMaps() {
        var mapContainers = document.querySelectorAll('.map-container');
        mapContainers.forEach(function (container) {
            var latitude = container.getAttribute('data-latitude');
            var longitude = container.getAttribute('data-longitude');

            // Check if latitude and longitude are available
            if (latitude !== 'None' && longitude !== 'None') {
                var map = L.map(container).setView([latitude, longitude], 13);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                }).addTo(map);
                L.marker([latitude, longitude]).addTo(map);
            } else {
                console.log("Invalid latitude or longitude for this homestay.");
            }
        });
    }

    document.addEventListener('DOMContentLoaded', function () {
        initializeMaps();
    });
</script>

{% endblock %}
