{% extends 'base.html' %}
{% load static %}
{% block content %}


<div class="form-main">
    <div class="form">
        <div class="form-title">Registration</div>
        <div class="form-content">
            <form action="{% url 'guest_signup' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="user-details">
                    <div class="input-box">
                        <span class="details">First Name</span>
                        <input type="text" name="first_name" placeholder="Enter your first name" required>
                    </div>
                    <div class="input-box">
                        <span class="details">Last Name</span>
                        <input type="text" name="last_name" placeholder="Enter your last name" required>
                    </div>
                    <div class="input-box">
                        <span class="details">Address</span>
                        <input type="text" name="address" placeholder="Enter your address" required>
                    </div>
                    <div class="input-box">
                        <span class="details">Phone no.</span>
                        <input type="tel" name="mobile" placeholder="Enter your phone no." required>
                    </div>
                    <div class="input-box">
                        <span class="details">Email</span>
                        <input type="email" name="email" placeholder="Enter your email" required>
                    </div>
                    <div class="input-box">
                        <span class="details">Username</span>
                        <input type="text" name="username" placeholder="Enter a username" required>
                    </div>
                    <div class="input-box">
                        <span class="details">Password</span>
                        <input type="password" name="password" placeholder="Enter a password with atleast 8 characters." required>
                    </div>
                </div>
                <div class="button">
                    <input type="submit" value="Register">
                </div>
            </form>
            <div class="form-footer">
                <div>Already have an account?</div>
                <div class="form-link"><a href="{% url 'login_guest' %}">Login</a></div>
            </div>
        </div>
    </div>
</div>


<script>
    document.addEventListener('DOMContentLoaded', function () {
        const form = document.querySelector('.form form');
        const firstName = document.querySelector('input[name="first_name"]');
        const lastName = document.querySelector('input[name="last_name"]');
        const address = document.querySelector('input[name="address"]');
        const phone = document.querySelector('input[name="mobile"]');
        const email = document.querySelector('input[name="email"]');
        const username = document.querySelector('input[name="username"]');
        const password = document.querySelector('input[name="password"]');

        form.addEventListener('submit', function (event) {
            event.preventDefault();

            // Regular expressions for validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const phoneRegex = /^[0-9+()-]+$/;
            const usernameRegex = /^[a-zA-Z]+[a-zA-Z0-9]*$/;

            // Validation checks
            if (!firstName.value.trim()) {
                alert("First name is required.");
                return;
            }
            if (!lastName.value.trim()) {
                alert("Last name is required.");
                return;
            }
            if (!address.value.trim()) {
                alert("Address is required.");
                return;
            }
            if (!phone.value.trim()) {
                alert("Phone number is required.");
                return;
            }
            if (!phoneRegex.test(phone.value.trim())) {
                alert("Invalid phone number format.");
                return;
            }
            if (!email.value.trim()) {
                alert("Email is required.");
                return;
            }
            if (!emailRegex.test(email.value.trim())) {
                alert("Invalid email address.");
                return;
            }
            if (!username.value.trim()) {
                alert("Username is required.");
                return;
            }
            if (!usernameRegex.test(username.value.trim())) {
                alert("Username can only contain alphabets or a combination of alphabets and numbers, but not numbers only.");
                return;
            }
            if (!password.value.trim()) {
                alert("Password is required.");
                return;
            }
            if (password.value.length < 8) {
                alert("Password must be at least 8 characters long.");
                return;
            }

            // If all validations pass, submit the form
            form.submit();
        });
    });
</script>


{% endblock %}
